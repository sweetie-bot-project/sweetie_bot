# disable debug messages
# trace -d 0
# cd to unified
pushd .
cd ../unified
# system 
source system/system_source.soar
# agent initialization
source initialization-proto3.soar
# cyclic o-support actions
source cycle.soar
# cognition modules
source vision.soar
# low lever actions
source wait.soar
source lookat2.soar
# debug
source debug.soar
# return 
popd

#
# TEST LOOKAT
#
sp {test-look-at*elaborate*name
	(state <s> ^substate general)
-->
	(<s> ^name test-look-at)
}

# elaborate 
sp {test-look-at*elaborate*elaborate-looking-at
	(state <s> ^substate general ^beliefs.process <proc>)
	(<proc> ^substate look-at)
-->
	(<s> ^looking-at <proc>)
}

# start new
sp {test-look-at*propose*looking-at
	(state <s> ^substate general -^looking-at ^beliefs.object <obj>)
	(<obj> ^input-link.visible now)
-->
	(<s> ^operator <op> +, =)
	(<op> ^name looking-at ^substate look-at ^process-args <a>)
	(<a> ^object <obj> ^deadline-time 5.0)
}

# continue looking
sp {test-look-at*propose*looking-at-continue
	(state <s> ^substate general ^looking-at <proc>)
-->
	(<s> ^operator <op> +)
	(<op> ^name looking-at-continue ^substate look-at ^process-link <proc>)
}

# do nothning
sp {test-look-at*propose*wait
	(state <s> ^substate general)
-->
	(<s> ^operator <op> +, <)
	(<op> ^name wait ^substate wait)
}
